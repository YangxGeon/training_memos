# DAY 1

강사 정보
---
- 최국현
- tang@linux.com

__점심시간:__ 

__쉬는시간:__ 

- [페이스메이커 github 주소](https://github.com/tangt64/training_memos/tree/main/opensource/pacemaker-101)
- [강의 메모 주소](https://github.com/tangt64/training_memos/blob/main/opensource/pacemaker-101/20240220-memo.md)
- [교재PDF 주소](https://github.com/tangt64/training_memos/blob/main/opensource-101/pacemaker-101/101-%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4-Pacemaker.pdf)
- [판서 주소](https://wbd.ms/share/v2/aHR0cHM6Ly93aGl0ZWJvYXJkLm1pY3Jvc29mdC5jb20vYXBpL3YxLjAvd2hpdGVib2FyZHMvcmVkZWVtLzIyOTk4OGIzYTNlYTQxZWY5MmU3MzgyZmFkZTc0YjY1X0JCQTcxNzYyLTEyRTAtNDJFMS1CMzI0LTVCMTMxRjQyNEUzRF9lYzczY2I0ZS01OGM1LTRiNTAtYTU3My05ODVhMjA2OTk4NTY=)

강의 진행 시 필요한 소프트웨어는 가상화 소프트웨어 및 리눅스 ISO이미지 입니다. 하이퍼바이저는 윈도우 10/11 Pro기준으로 하이퍼브이 사용합니다.

- [센트OS 9 스트림](https://www.centos.org/download/)
- [로키 9](https://rockylinux.org/news/rocky-linux-9-0-ga-release/)

## 랩 환경

x86_64bit/AMD
---
1. VMware Workstation/Player: 라이선스 문제
2. VirtualBox: vCPU버그 문제 및 네트워크
3. Hyper-V: Windows 10/11 Pro

가상머신
---
- vCPU: 2
- vMEM: 2048MiB, Recommend, 4096MiB
- Node1/2/3: 20GiB
- Node4: 150GiB(targetd server)

만약, 노드를 4대 이상 생성이 어려운 경우는 아래와 같이 생성
- node1/2/3
- node3번이 iSCSI서버가 됨


랩 환경 조건
---
1. 하이퍼브이 기반으로 진행
2. Windows 10/11 Pro 버전(가상화 가속 기능)
3. 리눅스 호스트 기반으로 사용 가능(libvirt기반으로 랩 가능)
4. 버추얼박스, 권장하지 않음(vCPU 문제. 특히 AMD CPU에서 문제가 있음)
5. VMWare Workstation/Player(교육용 라이선스가 불가능)
6. CentOS-9-Stream, Rocky 9(CentOS 8 Stream)


로키 리눅스 사용하지 않는 이유
---
1. pacemaker 및 pcsd의 패키지가 조금 달라짐.
2. 로키 리눅스는 레드햇 라이선스 정책상 SRPM를 그대로 사용이 불가능.
3. fence(stonith)장치가 올바르게 동작하지 않음.(라이브러리 링크가 다름)
4. centos-9-stream기반으로 진행.

"eth0"네트워크 정적으로 변경(static dhcp)
---

```powershell
powershell> New-VMSwitch -SwitchName "Static Switch" -SwitchType Internal
powershell> Get-NetAdapter
> ifIndex, <인덱스 번호>
powershell> New-NetIPAddress -IPAddress 192.168.0.1 -PrefixLength 24 -InterfaceIndex <인덱스 번호>
powershell> New-NetNat -Name MyNATnetwork -InternalIPInterfaceAddressPrefix 192.168.0.0/24
```

"root"계정으로 로그인 후, 다음처럼 아이피 변경.

```bash
nmcli con sh
# node1, 나머지 노드들은 뒤에 아이피만 변경
nmcli con mod eth0 ipv4.addresses 192.168.0.110/24 ipv4.gateway 192.168.0.1 ipv4.dns 8.8.8.8 ipv4.method manual
nmcli con up eth0

```


노트북/데스크탑(워크스테이션)
---
CPU: 4 cores
MEM: 16GiB, 권장은 32GiB

가상머신: vCPU: 2, vMEM: 4GiB, vDisk 100GiB x 4

**기본과정은 4대면(2,3대) 충분**
node1: cluster node
node2: cluster node
node3: cluster node + (storage + mgmt(vDisk x 4개 더 추가가))
node4: cluster node + storage + mgmt(vDisk x 4개 더 추가가)