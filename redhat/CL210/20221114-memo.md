# DAY 1

## 정보

최국현, tang@linux.com

              
              ---
CL210 RHOSP 16.1 == triple-o + ansible kolla(koalla)
                             + container(upstream, docker(containerd(runc)))
                             +          (downstream, podman(runc))

메모는 아래 주소에 정리
(https://github.com/tangt64/training_memos/tree/main/redhat/CL210, 메모)


## 계정정보

student/student

root/redhat

## 접근 시스템

```
workstation ---> controller: OSP API 컨트롤러 서버
                 ceph: OBJ Storage 서버
                 compute0: 하이퍼바이저 서버(qemu/kvm)
                 compute1: 하이퍼바이저 서버(qemu/kvm)
                 computehci0: 

                 ceph0
                 bastion

                 director

                 power
```


## 간단한 구성 요소

```bash
                    [io.podman.service] <--- API ---> <USER>
                              |
                              |
                       [nove-compute]
                              |
                              |
  -------------------<wrapped by container>-----------------------
                              |
                              |
                              .---> podman.socket <--- nove-compute
                             /
                       +-----------+
    privilige mode --- |  podman   | ---> io.podman.service
                       | (runtime) | ---> /var/run/containers --------+
                       +-----------+      /run/containers             |
                             |                                        |
                             |                                        |
                             |        .---(container monitoring)      |
                             |       /                                |
                             |      /                                 |
                             '---> conmon <--- <CONTAINER_IMG> -------+
                                      |
                                      |
                                      |
                                      '---> runc ---> <APPLICATION>
```                                      



## undercloud


AIO(All-In-One-OpenStack)

### 언더 클라우드 설명
(https://docs.openstack.org/tripleo-docs/latest/install/introduction/architecture.html)


### 오버 클라우드 설명

**Sattlite OpenStack**
(https://access.redhat.com/documentation/en-us/red_hat_satellite/6.7/html/provisioning_guide/provisioning-cloud-instances-openstack)


(https://subscription.packtpub.com/book/cloud-&-networking/9781788394383/9)
**Containers in OpenStack**
>By Pradeep Kumar Singh, Madhuri Kumari
>$28.99
>eBook version
>
>$36.99
>Print + eBook

**NetVirt**
(https://docs.opendaylight.org/projects/netvirt/en/latest/openstack-guide/openstack-with-netvirt.html)


**Corosync**
(http://corosync.github.io/corosync/)


* ZeroMQ
* qpid ---> Kafka
* rabbitmq


### the "dumb-init"

(https://github.com/Yelp/dumb-init/blob/master/dumb-init.c)

```c
// Indices are one-indexed (signal 1 is at index 1). Index zero is unused.
// User-specified signal rewriting.
int signal_rewrite[MAXSIG + 1] = {[0 ... MAXSIG] = -1};
// One-time ignores due to TTY quirks. 0 = no skip, 1 = skip the next-received signal.
char signal_temporary_ignores[MAXSIG + 1] = {[0 ... MAXSIG] = 0};

pid_t child_pid = -1;
char debug = 0;
char use_setsid = 1;
```