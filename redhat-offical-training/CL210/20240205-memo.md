# DAY 1

## 오픈스택 CL210 과정

__강사:__ 최국현

__이메일:__ tang@linux.com

[메모파일](https://github.com/tangt64/training_memos/blob/main/redhat-offical-training/CL210/20240205-memo.md)

[화이트 보드](https://wbd.ms/share/v2/aHR0cHM6Ly93aGl0ZWJvYXJkLm1pY3Jvc29mdC5jb20vYXBpL3YxLjAvd2hpdGVib2FyZHMvcmVkZWVtLzVkYTkxMDdmNDk4ZTQwMDJhY2JmN2Y5ZWQwMDhjYTk5X0JCQTcxNzYyLTEyRTAtNDJFMS1CMzI0LTVCMTMxRjQyNEUzRF8wZDRiOGUyMy1iMjk3LTQwYjItOTIyMS04MTEyYzQzZGRkMGI=)

점심시간: 12전후

쉬는시간: 10~15분정도


## 랩 소개

```
RHEL/Rocky
Podman/Docker

RHEL 8<=
Podman 
```

- student/student
- root/redhat

1. 터미널 하나 실행
2. 'sudo dnf install gnome-tweaks -y'
3. 'gnome-tweaks'
4. 'extension -> Application Menu, Desktop Icons, Windows List'
5. 'Window -> Min/Max Window Size' 


## 오픈스택 자동화

>자동화 엔지니어 또는 DevOps 엔지니어

1. Ansible/terraform/salt
2. OpenStack CI/CD(ZUUL)
3. Heat
4. API(OpenStack)
5. Image Build(OS+APP+LIB)

## 지나가면서...(운영체제)

Network(NetworkManager, systemd-networked)
---

__"NetworkManager"__모든 배포판에서 지원 및 사용. 최종적으로는 모든 배포판은 __"systemd-networked"__으로 통합. 앞으로는 __ifcfg-rh__형식은 지원하지 않음.

추후에 모든 네트워크는 시스템 블록인 "systemd"기반인 __"systemd-networkd"__ 로 통합. 현재 모든 배포판에서 사용이 가능.

[네트워크 매니저 마이그레이션 기능](https://opensource.com/article/22/8/migrate-networkmanager-keyfiles-configuration)

[systemd 네트워크](https://www.freedesktop.org/software/systemd/man/latest/)systemd.network.html


NTP(systemd-timedated)
---
1. NTPD
2. Chornyd

[systemd NTP](https://www.freedesktop.org/software/systemd/man/latest/systemd-timesyncd.service.html)

## podman


```bash
cd /etc/containers/
> policy.json     ## redhat.com위주로 구성 및 설정
> registries.conf

podman images
podman pods ls          ## 포드 조회
podman container ls       ## 컨테이너 조회
podman ps


## 컨테이너 상태 정보 저장위치

cd /var/lib/containers/storage/
> overlay             ## 컨테이너 모든 정보는 여기에 저장이 되어 있음
> overlay-containers
> overlay-images
```
1. POD+Container(POD(APP, Init 1))
2. dumb-init(syscall, Init 1)
> systemd. openstack-nova-compute.service | systemctl start httpd


# DAY 2

## 오픈스택 백업

1. 데이타베이스 백업(mariadb, mysql)
2. 설정파일(control-plane, compute, neutron backup)
3. 스토리지 백업 대상에서 제외
4. 이미지 백업(glance에 존재하는 이미지)
5. OS설정 부분(RHEL+UBI+Podman)


1. YAML: 인프라
2. TOML: 설정
3. JSON: 데이터


```bash
## BOOTSTRAPING
0. DOMAIN(testDomain)     ---> openstack domain create testSDS
1. ROLE(testRole)         ---> openstack role create testRole --domain testSDS
2. USER(testUser)         ---> openstack user create testUser --domain testSDS
3. PROJECT(testProject)   ---> openstack project create testProject --domain testSDS


ASSIGNMENT=ROLE{USER+PROJECT}  ---> openstack role add --user testUser --project testProject testRole

                               { REGION }
                                   |
                                   |        
                                RegionOne
                                   |
                                   |
                               { DOMAIN } ---> [SDS]
                                   |
                                   |
                             D(d)efault ---> { USER }
                                   /    ---> { PROJECT }
                                  /
                               { ROLE }
                                /
                               /   
         .---> openstack role create freeuser     ## 메타정보만 생성
        /                            --------
		OSP(ROLE)                          /
        \                           mapping
         \                           /
          `---> policy.json ---> policy.yaml
                                   [RBAC]
                                      - swiftoperator
                                      - member(_member_)
                                      - service
                                      - admin


                 ROLE --- GROUP --- USER(s)
                                     --group testGroup

                                    100(user_rbac)

```


qemu: 예물레이터 
- device
  + disk(qcow2-3, raw)
  + cpu
  + memory
  + bios
  + mainboard
  + nic(full)


>Near-raw performance, competitive with QED.
>Fully QCOW2 backwards-compatible feature set.
>Extensibility to tackle current and future storage virtualization challenges.


```bash

Copy On Write
Copy On Read

                        
                     [ volume ]   --- { cinder }
                           ^
                           |
                           |
                 .----> instance x 10 (COW)
                /
             backing file(device)
              /
+----------------+
|   base image   | COR
+----------------+

qemu-img info blahblah.qcow2
> format: qcow3
> virtio, para-virtualization driver 
```


kvm: 가상화 가속기(intel/amd)
- kvm.ko(irqbypass)
  + kvm_intel
  + kvm_amd

```bash


qemu-img

````


# DAY 3

# DAY 4